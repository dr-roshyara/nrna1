<template>
    <nrna-layout>
        <app-layout>
            <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8">
                <div class="max-w-4xl mx-auto px-4">
                    
                    <!-- Success Header -->
                    <div class="text-center mb-8">
                        <div class="bg-gradient-to-r from-green-500 to-blue-600 text-white py-6 px-8 rounded-xl shadow-lg">
                            <div class="text-4xl mb-3">‚úÖ</div>
                            <h1 class="text-2xl font-bold mb-2">Verification Successful!</h1>
                            <h2 class="text-xl mb-2">‡§Æ‡§§‡§¶‡§æ‡§®  ‡§ó‡§∞‡•ç‡§®‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§∏‡§µ‡•à ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•Å‡§ó‡•ç‡§Ø‡•ã‡•§ </h2>
                            <p class="text-lg opacity-90">Welcome {{ user_name }}, you can now proceed to vote.</p>
                            <p class="text-sm opacity-80">{{ user_name }}, ‡§Ø‡§π‡§æ‡§Å‡§≤‡•á ‡§Ö‡§¨  ‡§Æ‡§§‡§¶‡§æ‡§® ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§®‡•Å‡§π‡•Å‡§®‡•ç‡§õ‡•§</p>
                        </div>
                    </div>

                    <!-- Agreement Form -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-6">
                            <h2 class="text-xl font-bold text-center">Voting Agreement | ‡§Æ‡§§‡§¶‡§æ‡§® ‡§∏‡§Æ‡•ç‡§ù‡•å‡§§‡§æ</h2>
                        </div>
                        
                        <form @submit.prevent="submitAgreement" class="p-8">
                            
                            <!-- Voting Time Info -->
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0">
                                        <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-yellow-700">
                                            <strong>Important:</strong> You have {{ voting_time_minutes }} minutes to complete your voting once you start.
                                        </p>
                                        <p class="text-sm text-yellow-700">
                                            <strong>‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£:</strong> ‡§Æ‡§§‡§¶‡§æ‡§® ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•á‡§™‡§õ‡§ø ‡§§‡§™‡§æ‡§à‡§Ç‡§∏‡§Å‡§ó {{ voting_time_minutes }} ‡§Æ‡§ø‡§®‡•á‡§ü ‡§∏‡§Æ‡§Ø ‡§õ‡•§
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Agreement Text -->
                            <div class="space-y-4 mb-6">
                                <div class="bg-gray-50 rounded-lg p-6">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Terms and Conditions | ‡§®‡§ø‡§Ø‡§Æ ‡§∞ ‡§∏‡§∞‡•ç‡§§‡§π‡§∞‡•Ç</h3>
                                    
                                    <div class="space-y-3 text-gray-700">
                                        <p class="leading-relaxed">
                                            {{ agreement_text_english }}
                                        </p>
                                        <p class="leading-relaxed text-sm">
                                            {{ agreement_text_nepali }}
                                        </p>
                                        
                                        <div class="mt-4 p-4 border-l-4 border-blue-400 bg-blue-50">
                                            <ul class="text-sm space-y-1">
                                                <li>‚Ä¢ I understand that my vote is secret and will be recorded securely</li>
                                                <li>‚Ä¢ I will complete the voting process within the time limit</li>
                                                <li>‚Ä¢ I will not share my voting codes with anyone</li>
                                                <li>‚Ä¢ I agree to the electronic voting process and its rules</li>
                                            </ul>
                                            <ul class="text-sm space-y-1 mt-2 text-blue-700">
                                                 <li>‚Ä¢ ‡§Æ‡•á‡§∞‡•ã ‡§Æ‡§§ ‡§ó‡•ã‡§™‡•ç‡§Ø ‡§õ ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡•Ç‡§™‡§Æ‡§æ ‡§∞‡•á‡§ï‡§∞‡•ç‡§° ‡§π‡•Å‡§®‡•á‡§õ ‡§≠‡§®‡•ç‡§®‡•á ‡§ï‡•Å‡§∞‡§æ ‡§Æ ‡§¢‡•Å‡§ï‡•ç‡§ï ‡§õ‡•Å‡•§ </li>
                                                <li>‚Ä¢ ‡§Æ ‡§Ø‡•ã ‡§ï‡•Å‡§∞‡§æ‡§Æ‡§æ  ‡§∏‡§π‡§Æ‡§§ ‡§õ‡•Å ‡§ï‡§ø ‡§Ø‡•ã ‡§Æ‡§§‡§¶‡§æ‡§® ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§∏‡•ç‡§µ‡§Ø‡§Ç‡§∏‡•á‡§µ‡•Ä ‡§∞‡•Ç‡§™‡§Æ‡§æ ‡§§‡§Ø‡§æ‡§∞ ‡§™‡§æ‡§∞‡§ø‡§è‡§ï‡•ã ‡§π‡•ã ‡§∞ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§Ø‡§ï‡§≤‡§æ‡§à ‡§ï‡•Å‡§®‡•à ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§§‡§ø‡§∞‡•á‡§ï‡•ã ‡§õ‡•à‡§®‡•§</li>
                                                                                              <li>‚Ä¢ ‡§Æ ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§≠‡§ø‡§§‡•ç‡§∞ ‡§Æ‡§§‡§¶‡§æ‡§® ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ó‡§∞‡•ç‡§®‡•á‡§õ‡•Å‡•§</li>
                                                <li>‚Ä¢ ‡§Æ‡•à‡§≤‡•á  ‡§Æ‡•á‡§∞‡•ã ‡§Æ‡§§‡§¶‡§æ‡§® ‡§ï‡•ã‡§° ‡§Ö‡§∞‡•Ç‡§≤‡§æ‡§á ‡§¶‡§ø‡§®‡•á ‡§õ‡•à‡§®‡•§</li>
                                                <li>‚Ä¢ ‡§Æ ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•ã‡§®‡§ø‡§ï ‡§Æ‡§§‡§¶‡§æ‡§® ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∞ ‡§Ø‡§∏‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Æ‡§π‡§∞‡•Ç‡§Æ‡§æ ‡§∏‡§π‡§Æ‡§§ ‡§õ‡•Å‡•§</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Agreement Checkbox -->
                            <div class="mb-6">
                                <div class="border-2 border-blue-300 rounded-lg p-6 bg-blue-50">
                                    <div class="flex flex-col items-center justify-center mb-4">
                                        <div class="text-3xl mb-2">‚úÖ</div>
                                        <h3 class="text-xl font-bold text-red-700 mb-1">Agreement Required</h3>
                                        <p class="text-lg font-semibold text-red-700">‡§∏‡§Æ‡•ç‡§ù‡•å‡§§‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï</p>
                                    </div>
                                    
                                    <div class="flex justify-center">
                                        <label class="flex items-center cursor-pointer">
                                            <input 
                                                type="checkbox"
                                                v-model="form.agreement"
                                                class="w-5 h-5 text-blue-600 border-2 border-gray-400 rounded focus:ring-blue-500 focus:ring-2"
                                            />
                                            <span class="ml-3 text-lg font-medium text-gray-900">
                                                <span class="font-semibold">I agree to all terms and conditions stated above</span>
                                                <br>
                                                <span class="text-sm text-gray-600">‡§Æ‡§æ‡§•‡§ø ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ‡§ø‡§§ ‡§∏‡§¨‡•à ‡§®‡§ø‡§Ø‡§Æ ‡§∞ ‡§∏‡§∞‡•ç‡§§‡§π‡§∞‡•Ç‡§Æ‡§æ ‡§Æ ‡§∏‡§π‡§Æ‡§§ ‡§õ‡•Å</span>
                                            </span>
                                        </label>
                                    </div>
                                    
                                    <!-- Error Display -->
                                    <div v-if="$page.props.errors.agreement" class="mt-4 text-red-600 text-sm bg-red-50 p-2 rounded">
                                        {{ $page.props.errors.agreement }}
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button Only -->
                            <div class="text-center">
                                <button 
                                    type="submit" 
                                    class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold text-xl py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform transition-all duration-200 hover:scale-105"
                                    :disabled="!form.agreement"
                                    :class="{ 'opacity-50 cursor-not-allowed': !form.agreement }"
                                >
                                    <span class="mr-2">üó≥Ô∏è</span>
                                    Start Voting | ‡§Æ‡§§‡§¶‡§æ‡§® ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </app-layout>
    </nrna-layout>
</template>

<script>
import AppLayout from '@/Layouts/AppLayout'
import NrnaLayout from '@/Layouts/NrnaLayout'
import { useForm } from '@inertiajs/inertia-vue3'

export default {
    components: {
        AppLayout,
        NrnaLayout,
    },
    
    props: {
        user_name: String,
        voting_time_minutes: Number,
        agreement_text_nepali: String,
        agreement_text_english: String,
    },
    
    setup() {
        const form = useForm({
            agreement: false,
        })

        function submitAgreement() {
            form.post(route('code.agreement.submit'))
        }

        return { 
            form, 
            submitAgreement
        }
    }
}
</script>